# PBI-06-3 Validate API responses with Zod

## Description
Add Zod schemas to validate responses from `analyze-engine` and `get-analysis-status` and guard the UI against malformed data.

## Status History
- 2025-08-26T00:00:00Z | user_approves | Proposed -> Agreed | Proceed with schema validation work. | User
- 2025-08-26T00:03:00Z | start_work | Agreed -> InProgress | Implementing Zod schemas and wiring parse/error handling. | AI_Agent
- 2025-08-26T00:05:00Z | submit_for_review | InProgress -> Review | Zod validation integrated; build successful. | AI_Agent

## Requirements
- Define Zod schemas that align with `AnalysisResult` shape in `src/types/strategic-analysis.ts`.
- Use safeParse for both analyze and status responses; on failure, surface a friendly error and do not crash.
- Avoid parsing the response body twice (read text once, parse JSON once).

## Implementation Plan
- Implement schemas and parsing in `src/hooks/useStrategyAnalysis.ts`.
- Update error handling for non-OK HTTP responses.

## Test Plan
- Simulate malformed responses (e.g., missing `equilibrium.profile` or non-numeric probabilities) and ensure user-facing error appears and UI does not break.
- Verify valid responses proceed and render as before.

## Verification
- Pending build and manual tests.

## Files Modified
- `src/hooks/useStrategyAnalysis.ts`
